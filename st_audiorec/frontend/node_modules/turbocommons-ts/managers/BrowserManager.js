"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var StringUtils_1=require("../utils/StringUtils"),NumericUtils_1=require("../utils/NumericUtils"),ArrayUtils_1=require("../utils/ArrayUtils"),BrowserManager=function(){function t(){}return t.prototype.getCurrentUrl=function(){return window.location.href},t.prototype.isDocumentLoaded=function(){return"complete"===document.readyState},t.prototype.isCookie=function(t){return void 0!==this.getCookie(t)},t.prototype.setCookie=function(t,e,o,n,i,r){if(void 0===o&&(o=""),void 0===n&&(n="/"),void 0===i&&(i=""),void 0===r&&(r=!1),!StringUtils_1.StringUtils.isString(t)||StringUtils_1.StringUtils.isEmpty(t))throw new Error("key must be defined");if(void 0!==e&&null!==e||(e=""),!StringUtils_1.StringUtils.isString(e))throw new Error("value must be a string");if(NumericUtils_1.NumericUtils.isNumeric(o)){var a=o;(o=new Date).setDate(o.getDate()+a)}var d=encodeURIComponent(t)+"="+encodeURIComponent(e);return d+=o?"; expires="+o.toUTCString():"",d+=n?"; path="+n:"",d+=i?"; domain="+i:"",d+=r?"; secure":"",document.cookie=d,!0},t.prototype.getCookie=function(t){if(!StringUtils_1.StringUtils.isString(t)||StringUtils_1.StringUtils.isEmpty(t))throw new Error("key must be defined");for(var e=document.cookie.split("; "),o=/\+/g,n=0,i=e.length;n<i;n++){var r=e[n].split("="),a=r.shift()||"";if(decodeURIComponent(a.replace(o," "))===t)return decodeURIComponent(r.join("=").replace(o," "))}},t.prototype.deleteCookie=function(t,e){if(void 0===e&&(e="/"),!StringUtils_1.StringUtils.isString(t)||StringUtils_1.StringUtils.isEmpty(t))throw new Error("key must be defined");return void 0!==this.getCookie(t)&&(this.setCookie(t,"",-1,e),!0)},t.prototype.reload=function(){location.reload()},t.prototype.getPreferredLanguage=function(){var t="";if(ArrayUtils_1.ArrayUtils.isArray(window.navigator.languages)){for(var e=0;e<window.navigator.languages.length;e++)if(window.navigator.languages[e].length>=2){t=window.navigator.languages[e];break}}else t=(t=window.navigator.userLanguage||window.navigator.language).split(",")[0];return t.trim().substr(0,2).toLowerCase()},t.prototype.goToUrl=function(t,e,o){if(void 0===e&&(e=!1),void 0===o&&(o=null),null==o)e?window.open(t,"_blank"):window.location.href=t;else{var n=document.createElement("form");n.action=t,n.method="POST",n.style.display="none",e&&(n.target="_blank");for(var i=Object.getOwnPropertyNames(o),r=0;r<i.length;r++){var a=document.createElement("input");a.type="hidden",a.name=i[r],a.value=o[i[r]],n.appendChild(a)}document.body.appendChild(n),n.submit(),e&&document.body.removeChild(n)}},t.prototype.disableBackButton=function(){history.pushState(null,"",document.URL),window.addEventListener("popstate",this._onPopStatePreventBackButton)},t.prototype._onPopStatePreventBackButton=function(){history.pushState(null,"",document.URL)},t.prototype.enableBackButton=function(){window.removeEventListener("popstate",this._onPopStatePreventBackButton)},t.prototype.disableScroll=function(){},t.prototype.enableScroll=function(){},t.prototype.getScrollPosition=function(){return[window.pageXOffset,window.pageYOffset]},t.prototype.getWindowWidth=function(){return window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth||-1},t.prototype.getWindowHeight=function(){return window.innerHeight||document.documentElement.clientHeight||document.getElementsByTagName("body")[0].clientHeight||-1},t.prototype.getDocumentWidth=function(){return Math.max(document.body.scrollWidth,document.body.offsetWidth,document.documentElement.clientWidth,document.documentElement.scrollWidth,document.documentElement.offsetWidth)},t.prototype.getDocumentHeight=function(){return Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)},t.prototype.scrollTo=function(t,e,o){void 0===e&&(e=600),void 0===o&&(o=null);var n=function(t){return--t*t*t+1},i=window.pageXOffset,r=window.pageYOffset,a="now"in window.performance?performance.now():(new Date).getTime(),d=this.getDocumentWidth(),l=this.getDocumentHeight(),u=this.getWindowWidth(),s=this.getWindowHeight(),c=ArrayUtils_1.ArrayUtils.isArray(t)?t[0]:t.offsetLeft,g=ArrayUtils_1.ArrayUtils.isArray(t)?t[1]:t.offsetTop,m=i,p=r;if(d>u&&(m=Math.round(d-c<u?d-u:c)),l>s&&(p=Math.round(l-g<s?l-s:g)),"requestAnimationFrame"in window==!1)return window.scroll(m,p),void(o&&o());!function t(){var d="now"in window.performance?performance.now():(new Date).getTime(),l=Math.min(1,(d-a)/e),u=Math.ceil(n(l)*(m-i)+i),s=Math.ceil(n(l)*(p-r)+r);window.scroll(u,s),Math.ceil(window.pageXOffset)!==m||Math.ceil(window.pageYOffset)!==p?requestAnimationFrame(t):null!==o&&o()}()},t}();exports.BrowserManager=BrowserManager;